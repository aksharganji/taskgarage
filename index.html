<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Task Garage</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app" id="app" data-theme="light" data-compact="false">
    <aside class="panel fade-in" aria-labelledby="appTitle">
      <div class="brand">
        <div class="logo">TG</div>
        <div>
          <h1 id="appTitle">Task Garage</h1>
          <p class="lead">Smart, fast, and minimal task manager</p>
        </div>
      </div>
      <form id="taskForm" class="add-form" onsubmit="return false" aria-label="Add new task">
        <div class="field">
          <label for="title">Task title</label>
          <input id="title" required type="text" placeholder="e.g. Finish project report" autocomplete="off" />
        </div>
        <div class="row">
          <div style="flex:1" class="field">
            <label for="due">Due date</label>
            <input id="due" type="date" />
          </div>
          <div style="width:140px" class="field">
            <label for="priority">Priority</label>
            <select id="priority">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
            </select>
          </div>
        </div>
        <div class="field">
          <label for="notes">Notes (optional)</label>
          <textarea id="notes" placeholder="Details, reminders, links"></textarea>
        </div>
        <div class="field">
          <label for="progress">Progress (%)</label>
          <input id="progress" type="number" min="0" max="100" value="0" placeholder="0 to 100" />
        </div>
        <div class="row">
          <button type="button" class="btn btn-primary" id="addBtn">Add Task</button>
          <button type="button" class="btn btn-ghost" id="clearInputs">Clear</button>
        </div>
      </form>
      <div class="divider"></div>
      <div class="section-title">Settings</div>
      <button id="requestNotificationPermissionBtn" class="btn btn-ghost">Enable Notifications</button>
      <div class="row" style="align-items:center; gap:12px; margin-top:8px">
        <label style="display:flex; gap:8px; align-items:center;">
          <input type="checkbox" id="themeToggle" />
          Dark mode
        </label>
        <label style="display:flex; gap:8px; align-items:center;">
          <input type="checkbox" id="compactToggle" />
          Compact mode
        </label>
      </div>
    </aside>
    <main class="main fade-in">
      <div class="topbar">
        <div class="section-title" style="font-size: 16px;">All tasks</div>
        <div class="row" style="gap:8px;">
          <select id="filter" class="select">
            <option value="all">All</option>
            <option value="active">Active</option>
            <option value="completed">Completed</option>
            <option value="overdue">Overdue</option>
          </select>
          <select id="sort" class="select">
            <option value="newest">Newest</option>
            <option value="oldest">Oldest</option>
            <option value="due_asc">Due date ↑</option>
            <option value="due_desc">Due date ↓</option>
            <option value="priority">Priority</option>
          </select>
          <button id="clearAll" class="btn btn-ghost">Clear All</button>
        </div>
      </div>
      <div class="search-wrap" style="margin-bottom: 8px;">
        <input id="search" placeholder="Search tasks..." type="text" aria-label="Search tasks" />
      </div>
      <section id="taskContainer" class="task-list"></section>

      <div id="emptyState" class="empty" hidden>
        You have no tasks yet — add your first task on the left ✨
      </div>
      
      <div id="overallProgress" class="overall-progress-container" hidden>
        <div class="overall-progress-bar">
          <div class="overall-progress-fill"></div>
          <span class="overall-progress-label"></span>
        </div>
      </div>
    </main>
    <div class="modal" id="editModal" aria-hidden="true">
      <div class="modal-backdrop" id="modalBackdrop"></div>
      <div class="modal-card">
        <h2>Edit Task</h2>
        <form id="editForm" onsubmit="return false">
          <div class="field">
            <label for="editTitle">Title</label>
            <input id="editTitle" required type="text" />
          </div>
          <div class="row">
            <div style="flex:1" class="field">
              <label for="editDue">Due date</label>
              <input id="editDue" type="date" />
            </div>
            <div style="width:140px" class="field">
              <label for="editPriority">Priority</label>
              <select id="editPriority">
                <option value="low">Low</option>
                <option value="medium">Medium</option>
                <option value="high">High</option>
              </select>
            </div>
          </div>
          <div class="field">
            <label for="editNotes">Notes</label>
            <textarea id="editNotes"></textarea>
          </div>
          <div class="field">
            <label for="editProgress">Progress (%)</label>
            <input id="editProgress" type="number" min="0" max="100" value="0" />
          </div>
          <div class="row">
            <button type="button" class="btn btn-primary" id="saveEdit">Save</button>
            <button type="button" class="btn btn-ghost" id="cancelEdit">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <script src="script.v2.js"></script>
</body>
</html>